<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å</title>
  <style>
    * {
      margin: 0; padding: 0; box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
      background-color: #121212;
      color: white;
      padding: 0;
      max-width: 400px;
      margin: 0 auto;
      overflow-x: hidden;
      scroll-behavior: smooth;
      padding-bottom: 80px;
    }

    /* === –û–±—â–∏–µ —Å—Ç–∏–ª–∏ === */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      background-color: #121212;
    }
    .back-btn { font-size: 24px; cursor: pointer; }
    .page-title {
      font-size: 20px;
      font-weight: bold;
      padding: 16px;
    }

    /* === –ö–∞—Ä—Ç–æ—á–∫–∏ —É—Ä–æ–∫–æ–≤ === */
    .lesson-card {
      background: #2d2d2d;
      border-radius: 12px;
      padding: 16px;
      margin: 12px 16px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .lesson-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }
    .lesson-card:active {
      transform: scale(0.97);
    }
    .lesson-title { font-size: 16px; font-weight: bold; margin-bottom: 8px; }
    .lesson-desc { font-size: 14px; color: #aaa; }

    /* === –ú–æ–¥–∞–ª–∫–∞ (–æ–±—â–∞—è) === */
    .modal-overlay {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.7);
      display: none;
      align-items: flex-end;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }
    .modal-overlay.show {
      display: flex;
      opacity: 1;
      pointer-events: all;
    }
    .modal {
      width: 100%;
      background: #1c1c1c;
      border-radius: 24px 24px 0 0;
      padding: 24px;
      transform: translateY(100%);
      transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      max-height: 85vh;
      overflow-y: auto;
    }
    .modal-overlay.show .modal {
      transform: translateY(0);
    }
    .modal-header {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 16px;
    }
    .modal-close { font-size: 24px; cursor: pointer; }

    /* === –¢–µ–æ—Ä–∏—è === */
    .theory-content {
      background: #2d2d2d;
      padding: 16px;
      border-radius: 12px;
      line-height: 1.5;
      animation: fadeInUp 0.5s ease;
    }

    /* === –í–æ–ø—Ä–æ—Å === */
    .question-text {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 20px;
    }
    .options { display: flex; flex-direction: column; gap: 12px; }
    .option {
      padding: 14px;
      background: #2d2d2d;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .option:hover {
      background: #3a3a3a;
      transform: translateX(4px);
    }
    .option.correct {
      background: #4caf50 !important;
      color: white;
      animation: bounceIn 0.5s ease;
    }
    .option.wrong {
      background: #f44336 !important;
      color: white;
      animation: shake 0.5s ease;
    }

    /* === –†–µ–∑—É–ª—å—Ç–∞—Ç === */
    .result-modal-overlay {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1200;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease;
    }
    .result-modal-overlay.show {
      display: flex;
      opacity: 1;
      pointer-events: all;
    }
    .result-modal {
      background: linear-gradient(135deg, #1e1e1e, #2a2a2a);
      border-radius: 20px;
      padding: 32px;
      text-align: center;
      max-width: 320px;
      width: 90%;
      transform: scale(0.8);
      opacity: 0;
      transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .result-modal-overlay.show .result-modal {
      transform: scale(1);
      opacity: 1;
    }
    .result-icon { font-size: 48px; margin-bottom: 16px; }
    .result-title { font-size: 20px; font-weight: bold; margin-bottom: 8px; }
    .result-text { color: #aaa; margin-bottom: 24px; line-height: 1.4; }
    .result-btn {
      background: #ff3b30;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 12px;
      font-weight: bold;
      cursor: pointer;
    }

    /* === –ù–∞–≤–∏–≥–∞—Ü–∏—è === */
    .bottom-nav {
      position: fixed; bottom: 0; left: 0; right: 0;
      background: #121212;
      display: flex; justify-content: space-around;
      padding: 12px 0;
      border-top: 1px solid #333;
    }
    .nav-item { display: flex; flex-direction: column; align-items: center; gap: 4px; }
    .nav-icon { font-size: 20px; }
    .nav-label { font-size: 12px; }

    /* === –ê–Ω–∏–º–∞—Ü–∏–∏ === */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes bounceIn {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-8px); }
      75% { transform: translateX(8px); }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="back-btn">‚Üê</div>
    <div>–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å</div>
    <div></div>
  </div>

  <div class="page-title">–£—Ä–æ–∫–∏</div>
  <div id="lessons-container"></div>

  <!-- –ú–æ–¥–∞–ª–∫–∞ —Ç–µ–æ—Ä–∏–∏ -->
  <div class="modal-overlay" id="theoryModal">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title" id="theoryTitle"></div>
        <div class="modal-close" id="theoryClose">√ó</div>
      </div>
      <div class="theory-content" id="theoryText"></div>
      <button class="btn primary" id="startTestBtn" style="
        background: #ff3b30; color: white; border: none; padding: 12px; border-radius: 12px; font-weight: bold; margin-top: 16px; width: 100%;
      ">–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç</button>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ -->
  <div class="modal-overlay" id="questionModal">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title" id="questionTitle"></div>
        <div class="modal-close" id="questionClose">√ó</div>
      </div>
      <div class="question-text" id="questionText"></div>
      <div class="options" id="questionOptions"></div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ -->
  <div class="result-modal-overlay" id="resultModal">
    <div class="result-modal">
      <div class="result-icon" id="resultIcon">‚úÖ</div>
      <div class="result-title" id="resultTitle">–û—Ç–ª–∏—á–Ω–æ!</div>
      <div class="result-text" id="resultText">–í—ã –ø—Ä–æ—à–ª–∏ —É—Ä–æ–∫!</div>
      <button class="result-btn" id="resultClose">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
    </div>
  </div>

  <div class="bottom-nav">
    <div class="nav-item">
      <div class="nav-icon">üè†</div>
      <div class="nav-label">–ì–ª–∞–≤–Ω–∞—è</div>
    </div>
    <div class="nav-item active">
      <div class="nav-icon">üìö</div>
      <div class="nav-label">–ö—É—Ä—Å</div>
    </div>
    <div class="nav-item">
      <div class="nav-icon">‚ù§Ô∏è</div>
      <div class="nav-label">–í—ã–≥–æ–¥–∞</div>
    </div>
    <div class="nav-item">
      <div class="nav-icon">‚è±Ô∏è</div>
      <div class="nav-label">–ò—Å—Ç–æ—Ä–∏—è</div>
    </div>
    <div class="nav-item">
      <div class="nav-icon">üí¨</div>
      <div class="nav-label">–ß–∞—Ç—ã</div>
    </div>
  </div>

  <script>
    let currentLesson = null;
    let currentQuestionIndex = 0;
    let userAnswers = [];

    // –ó–∞–≥—Ä—É–∑–∫–∞ –∫—É—Ä—Å–∞
    fetch('financial-literacy-course.json')
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById('lessons-container');
        data.lessons.forEach(lesson => {
          const card = document.createElement('div');
          card.className = 'lesson-card';
          card.innerHTML = `
            <div class="lesson-title">${lesson.title}</div>
            <div class="lesson-desc">–¢–µ–æ—Ä–∏—è + —Ç–µ—Å—Ç</div>
          `;
          card.onclick = () => openTheory(lesson);
          container.appendChild(card);
        });
      });

    // === –¢–µ–æ—Ä–∏—è ===
    function openTheory(lesson) {
      currentLesson = lesson;
      document.getElementById('theoryTitle').textContent = lesson.title;
      document.getElementById('theoryText').textContent = lesson.theory;
      document.getElementById('theoryModal').classList.add('show');
    }

    document.getElementById('theoryClose').onclick = () => {
      document.getElementById('theoryModal').classList.remove('show');
    };
    document.getElementById('startTestBtn').onclick = () => {
      document.getElementById('theoryModal').classList.remove('show');
      currentQuestionIndex = 0;
      userAnswers = [];
      showQuestion();
    };

    // === –í–æ–ø—Ä–æ—Å ===
    function showQuestion() {
      const q = currentLesson.questions[currentQuestionIndex];
      document.getElementById('questionTitle').textContent = currentLesson.title;
      document.getElementById('questionText').textContent = `${currentQuestionIndex + 1}. ${q.question}`;
      
      const optionsEl = document.getElementById('questionOptions');
      optionsEl.innerHTML = '';
      q.options.forEach((opt, i) => {
        const optEl = document.createElement('div');
        optEl.className = 'option';
        optEl.textContent = opt;
        optEl.onclick = () => selectAnswer(i, q.correct);
        optionsEl.appendChild(optEl);
      });

      document.getElementById('questionModal').classList.add('show');
    }

    function selectAnswer(selected, correct) {
      const options = document.querySelectorAll('#questionOptions .option');
      options.forEach(o => o.style.pointerEvents = 'none');

      if (selected === correct) {
        options[selected].classList.add('correct');
        userAnswers.push(true);
      } else {
        options[selected].classList.add('wrong');
        options[correct].classList.add('correct');
        userAnswers.push(false);
      }

      setTimeout(() => {
        document.getElementById('questionModal').classList.remove('show');
        currentQuestionIndex++;
        if (currentQuestionIndex < currentLesson.questions.length) {
          setTimeout(showQuestion, 300);
        } else {
          showResult();
        }
      }, 1200);
    }

    document.getElementById('questionClose').onclick = () => {
      document.getElementById('questionModal').classList.remove('show');
    };

    // === –†–µ–∑—É–ª—å—Ç–∞—Ç ===
    function showResult() {
      const correct = userAnswers.filter(Boolean).length;
      const total = userAnswers.length;
      const allCorrect = correct === total;

      const icon = document.getElementById('resultIcon');
      const title = document.getElementById('resultTitle');
      const text = document.getElementById('resultText');

      if (allCorrect) {
        icon.textContent = 'üéâ';
        title.textContent = '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!';
        text.textContent = `–í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ –≤—Å–µ ${total} –≤–æ–ø—Ä–æ—Å–æ–≤!`;
      } else {
        icon.textContent = 'üí°';
        title.textContent = '–•–æ—Ä–æ—à–∞—è –ø–æ–ø—ã—Ç–∫–∞!';
        text.textContent = `–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${correct} –∏–∑ ${total}.`;
      }

      document.getElementById('resultModal').classList.add('show');
    }

    document.getElementById('resultClose').onclick = () => {
      document.getElementById('resultModal').classList.remove('show');
    };
  </script>
</body>
</html>